<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Click-to-Advance Slideshow — Crossfade, Images + WebM</title>
  <style>
    :root { --bg: #7e5e7c; --fg: #222; --muted: #6a6a6a; }
    html, body { height: 100%; }
    body {
      margin: 0;
      background: var(--bg);
      color: var(--fg);
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial;
      overflow: hidden;
    }

    .stage { position: fixed; inset: 0; display: grid; place-items: center; cursor: pointer; user-select: none; }
    .stack { position: relative; width: 100vw; height: 100vh; }

    .slide { position: absolute; inset: 0; margin: auto; display: grid; place-items: center; opacity: 0; transition: opacity 350ms ease; }
    .slide.is-visible { opacity: 1; }

    .media { display: block; pointer-events: none; }
    .media::-webkit-media-controls { display: none !important; }

    .overlay { position: fixed; left: 50%; bottom: 12px; transform: translateX(-50%); font-size: 12px; color: var(--muted); background: rgba(0,0,0,0.08); padding: 6px 10px; border-radius: 10px; backdrop-filter: blur(2px); }

    .home { position: fixed; left: 12px; bottom: 12px; z-index: 20; padding: 6px 10px; border-radius: 10px; border: 1px solid rgba(0,0,0,0.15); background: rgba(255,255,255,0.7); color: #111; font-size: 16px; backdrop-filter: blur(2px); cursor: pointer; user-select: none; transition: opacity 200ms ease; }
    .home:hover { background: rgba(255,255,255,0.9); }
    .home.hidden { opacity: 0; pointer-events: none; }
  </style>
</head>
<body>
  <div id="stage" class="stage" title="Click to go to next media (←/→ also work)">
    <div class="stack" aria-live="polite" aria-atomic="true">
      <div id="slideA" class="slide"></div>
      <div id="slideB" class="slide"></div>
    </div>
  </div>
  <div id="info" class="overlay">0 / 0</div>
  <button id="homeBtn" class="home" title="Go to first & randomize others">⌂</button>

  <script>
    const IMAGES = [
      "https://cdn.discordapp.com/attachments/709821851446280234/1428519652685910128/KepRoom.png?ex=68f2cc19&is=68f17a99&hm=239143e7df553953e2ef7f26d47c77b31f87dc1818bb8cd842cf018a5ea676de&",
      "https://static1.e621.net/data/f2/07/f20703a4320cbb3870a2902ae97525e8.webm",
      "https://d.furaffinity.net/art/hungrykep/1751140965/1751140965.hungrykep_ych_animated_bj.gif",
      "https://d.furaffinity.net/art/hungrykep/1753420231/1753420231.hungrykep_image.png",
      "https://d.furaffinity.net/art/hungrykep/1699916788/1699916788.hungrykep_undefined_-_imgur.gif",
      "https://d.furaffinity.net/art/hungrykep/1732498148/1732498148.hungrykep_bar.png",
      "https://d.furaffinity.net/art/hungrykep/1734276288/1734276288.hungrykep_1721339509_hungrykep_img_3265.png",
      "https://d.furaffinity.net/art/hungrykep/1737052169/1737052169.hungrykep_spoiler_img_0040.png",
      "https://d.furaffinity.net/art/hungrykep/1737090781/1737090781.hungrykep_img_9252.png",
      "https://d.furaffinity.net/art/hungrykep/1737052420/1737052420.hungrykep_10don.png",
      "https://d.furaffinity.net/art/hungrykep/1745132955/1745132955.hungrykep_img_3089.png",
      "https://d.furaffinity.net/art/hungrykep/1746907159/1746907159.hungrykep_img_20240220_213944_457_jpeg.jpg",
      "https://d.furaffinity.net/art/hungrykep/1746925910/1746925910.hungrykep_img_2984.gif",
      "https://d.furaffinity.net/art/hungrykep/1751818888/1751818888.hungrykep_img_3085.gif",
      "https://d.furaffinity.net/art/hungrykep/1759260906/1759260906.hungrykep_img-0438.png",
      "https://d.furaffinity.net/art/hungrykep/1752688980/1752688980.hungrykep_img_3445.png",
      "https://d.furaffinity.net/art/hungrykep/1754922193/1754922193.hungrykep_img_3444.png",
      "https://d.furaffinity.net/art/hungrykep/1745245456/1745245456.hungrykep_spoiler_img_8973.png",
      "https://cdn.discordapp.com/attachments/1412875248180920330/1412899876492148886/IMG_2762.png?ex=68f3524c&is=68f200cc&hm=1c5e5bae67305ad818e48335e1a5d7b39deca53be7eac37aa77d65cd204b12ea&",
      "https://cdn.discordapp.com/attachments/1412875248180920330/1412899876974366731/Untitled34_20230902190442.png?ex=68f3524d&is=68f200cd&hm=65beaffbbe0ae25dff9de59723d85e1549ff09d5fe79878b50d6552891be56dd&",
      "https://cdn.discordapp.com/attachments/1412875248180920330/1412899877360500746/2-3_20230831201435.png?ex=68f3524d&is=68f200cd&hm=0ae91264a020eb3fb0a77b4752e4be4c3bb8782a76e23a66a6ac2c230c878cb9&",
      "https://cdn.discordapp.com/attachments/1412875248180920330/1412899936080761013/Kep__Ryker.png?ex=68f3525b&is=68f200db&hm=5da639e489061c67bd4520708311c81181ea10024b8881ae58420a690ac8ded4&",
      "https://cdn.discordapp.com/attachments/1412875248180920330/1412899945148842185/Walking_along_shoreline.png?ex=68f3525d&is=68f200dd&hm=5ae552abafa5669f91d36b5d6a3aad4b97160f572c4f3b585e4bbb9d3f01f264",
      "https://cdn.discordapp.com/attachments/1412877723512344717/1414770793400766615/sketch1689996680126.png?ex=68f2e07a&is=68f18efa&hm=56189f7e3f23b775513f36f0930ed03155df55f9c1502c1bacd562f3cc1a397f&",
      "https://cdn.discordapp.com/attachments/1412877723512344717/1414770903815815198/1693960121.aimee-lesley-sim_couple_drifter27_lr.png?ex=68f2e094&is=68f18f14&hm=e5f626362d71098ddf893ae34ccaa39df062172944313c3d78c13a17856e9063",
      "https://cdn.discordapp.com/attachments/1412877723512344717/1414771014113427488/IMG_8850.png?ex=68f2e0ae&is=68f18f2e&hm=405da462a5c909a04a9168982c06b7962e6ee7c56823111b2a1e5eeb658c9ab0",
      "https://cdn.discordapp.com/attachments/1412877723512344717/1414771039988088943/SPOILER_IMG_8863.png?ex=68f2e0b5&is=68f18f35&hm=14ad811c533289670feb330ef4b895fb5a874b3b8c1f285b57b253b4f1ced435&",
      "https://cdn.discordapp.com/attachments/1412877723512344717/1414771300932653147/1704262425.aimee-lesley-sim_drifter27_lr.png?ex=68f2e0f3&is=68f18f73&hm=a5ed13a88dc5b77944f4491cc74d9bba423d700a2de646d07c8815700d3586a3",
      "https://cdn.discordapp.com/attachments/1412877723512344717/1414771469921157190/SPOILER_IMG_9638.png?ex=68f2e11b&is=68f18f9b&hm=e72ee7c540ceebf1a079870998b563f7f0f501823850e0039e66969fb7314ad4",
      "https://cdn.discordapp.com/attachments/1412877723512344717/1414771849564520508/Comi00310.png?ex=68f2e176&is=68f18ff6&hm=4539b40fc46c69cb3fe95c0a8e09e55703141ea9ac2789c4059536280238202d&",
      "https://cdn.discordapp.com/attachments/1412877723512344717/1414772002006237274/IMG_3466.png?ex=68f2e19a&is=68f1901a&hm=ffe406ab4efa3535de6f026d7eabbd487b3b70fcfd02196a47816760bbb58928",
      "https://cdn.discordapp.com/attachments/1412877723512344717/1414772063561973761/20241119_162540.png?ex=68f2e1a9&is=68f19029&hm=77d4b644b104d7ae9127ed617b481d126b4f336dec39429f8124b67b5dbe0c8c&",
      "https://cdn.discordapp.com/attachments/1412877723512344717/1414770769023598693/sketch1685421579575.png?ex=68f6d4f4&is=68f58374&hm=1753c889463ba439708eeac6e46eb26f5f7d5913329a77b4dcd25689ec663187&",
      "https://cdn.discordapp.com/attachments/1412877723512344717/1414770814959751168/sketch1691612188441.png?ex=68f6d4ff&is=68f5837f&hm=6dddcc52bc86232d042a9c96ca801625c88de78d2e3d8d41fc0dfd6c80597537&",
      "https://cdn.discordapp.com/attachments/1412877723512344717/1414770855568740484/Untitled_Artwork.png?ex=68f6d509&is=68f58389&hm=23d0303248a7bc260281945772455dde9068d51f92b48b451d8e5fc29e28a312&",
      "https://media.discordapp.net/attachments/1412877723512344717/1414770893124796477/Untitled_Artwork.png?ex=68f6d512&is=68f58392&hm=97a619772771b9068fad5d8788e6a72f5d1a02e76df2ad85efd7218b7de1dd5b&=&format=webp&quality=lossless&width=1436&height=1436",
      "https://cdn.discordapp.com/attachments/1412877723512344717/1414771045705056357/23.08.19.jpg?ex=68f6d536&is=68f583b6&hm=72b8c83e888c42423525792cda456e8bc2d291d40f1bdf78e4ecfcf7add376bd&",
      "https://cdn.discordapp.com/attachments/1412877723512344717/1414771155394498691/196.jpg?ex=68f6d550&is=68f583d0&hm=910666c109e17eb5985dc45018af54948925377ce492f20a64b440ed61069d57&",
      "https://cdn.discordapp.com/attachments/1412877723512344717/1414771646916595835/IMG_3261.gif?ex=68f6d5c5&is=68f58445&hm=b9a70ad1c4296993de2fa5c1b4bc99dd6f9f4c5a28bd6f7a7b9b9f06edd5897b&",
      "https://cdn.discordapp.com/attachments/1412877723512344717/1414771747080638625/v_ych.png?ex=68f6d5dd&is=68f5845d&hm=58d7c1ecfb8b5a30a6b30e31e79552d4ca8fd13f89556246d7297a2ead845c55&",
      "https://cdn.discordapp.com/attachments/1412877723512344717/1414771747726692422/ych2.png?ex=68f6d5dd&is=68f5845d&hm=7abb1cbe97110acfaaf511681a5d6b23c74580cf9ab82134b7ed7ab81692e511&",
      "https://cdn.discordapp.com/attachments/1412877723512344717/1414771829955891250/bar_1.png?ex=68f6d5f1&is=68f58471&hm=ae041f735f34d3e6ff6d093c49c606708198f864f47445f62fdf8425aca8e12e&",
      "https://cdn.discordapp.com/attachments/1412877723512344717/1414771903662657657/bed.png?ex=68f6d603&is=68f58483&hm=ab43ed42096e01fc893fe0627b04ed330f87a4e72eeeee5cd9b979514e896d15&",
      "https://cdn.discordapp.com/attachments/1412877723512344717/1414771933748133998/12.png?ex=68f6d60a&is=68f5848a&hm=e8c06bce5ea0f64a18c4140ad2dfd58da4c7ea4608106eee4e4402a51a25f6b8&",
      "https://cdn.discordapp.com/attachments/1412877723512344717/1414771988349587496/155.png?ex=68f6d617&is=68f58497&hm=8134a57ad4c4579102b5ef9e102f1ab12024bfb3de56cb15d0930f77e5c3df05&",
      "https://cdn.discordapp.com/attachments/1412877723512344717/1414772070851678228/10don1.png?ex=68f6d62a&is=68f584aa&hm=0a3bf07ca00241a65504c28fd46d5079ffe8b545c5c341ce0e5cbc1a29218547&",
      "https://media.discordapp.net/attachments/1412877723512344717/1414772082457186486/KamkipCM.png?ex=68f6d62d&is=68f584ad&hm=2d3b31a4fb2025a15eb38e0741acf39789846b6b32e958931696b82c5b975526&=&format=webp&quality=lossless&width=1238&height=1228",
      "https://cdn.discordapp.com/attachments/1412877723512344717/1414772121246367875/SPOILER_kep_and_lucario.png?ex=68f6d636&is=68f584b6&hm=8e459113c0122f324b431be03670a506926ecc66278748f75d6553a8c95c16a3&",
      "https://cdn.discordapp.com/attachments/1412877723512344717/1414772127072124958/LK.png?ex=68f6d638&is=68f584b8&hm=ba6252d1be70785358c2520cfa012f4f0a0ed69e96189514ff86bdca59dfcaaf&",
      "https://cdn.discordapp.com/attachments/1412877723512344717/1414772139181211669/matingpress.png?ex=68f6d63b&is=68f584bb&hm=0fe902c613b3379743ad1cad9c6f446192f68b1d8a9492bd9c6431f5d71cd701&",
      "https://cdn.discordapp.com/attachments/1412877723512344717/1414772162015002785/24.1.png?ex=68f6d640&is=68f584c0&hm=1cde1e7dbd80070036a903eda1367cc5433944272da21569a44e715b64fff3a2&",
      "https://cdn.discordapp.com/attachments/1412877723512344717/1414772190028763196/23.png?ex=68f6d647&is=68f584c7&hm=9ad60917ff2e420534fa2acfad96bdf869187c06814d4c0026bec61138255437&",
      "https://cdn.discordapp.com/attachments/1412877723512344717/1414772228138074132/Polish_20250312_204324104.png?ex=68f6d650&is=68f584d0&hm=f433e1730463e331beedcc900cfaf40760ef47b184b03cd6b7222b9f760d9d55&",
      "https://cdn.discordapp.com/attachments/1412877723512344717/1414772237851951268/GzK.png?ex=68f6d652&is=68f584d2&hm=b6bd0f3aa25e8ba731268e3ea776c9b3f1df532ff67256b45a45b606fa94dd41&",
      "https://cdn.discordapp.com/attachments/1412877723512344717/1414772242994167880/Kep.png?ex=68f6d653&is=68f584d3&hm=de4bae20585e3643d1326de7c217e90af28fced532b99f9b2239e66a2118fc56&",
      "https://cdn.discordapp.com/attachments/1412877723512344717/1414772261289726073/couch_cuddles_com_v1_by_gushosen_dje64fm.png?ex=68f6d658&is=68f584d8&hm=4ee8f180d018db3b7523cb652ad55ea2bad61457567da1407043c05c3526f6ab&",
      "https://cdn.discordapp.com/attachments/1412877723512344717/1414772260031434793/couch_cuddles_com_v3_by_gushosen_dje64es.png?ex=68f6d657&is=68f584d7&hm=97ed3bcb49ae4ed4288b6128884acf36eae7d18257bd5495a6f57f71e3c3bd16&",
      "https://cdn.discordapp.com/attachments/1412877723512344717/1414772305321787502/alt1.png?ex=68f6d662&is=68f584e2&hm=628cb9e6187e2a92c02f7dae3ce9fa40d0fd6b0dc8234c4c87738373ef9b16f2&",
      "https://cdn.discordapp.com/attachments/1412877723512344717/1414772312124690582/26.2.png?ex=68f6d664&is=68f584e4&hm=46248057b696dba928e1103b3f1dea5a735f81d6b0f9934d267897ed6d6072a1&",
      "https://cdn.discordapp.com/attachments/1412877723512344717/1414772359688224779/GKG43.png?ex=68f6d66f&is=68f584ef&hm=4f8210b61959b858cef81695b1f21d9730cfc52d45b2dee0995228460af777b3&",
      "https://cdn.discordapp.com/attachments/1412877723512344717/1414772366688653433/car.png?ex=68f6d671&is=68f584f1&hm=0d094d8c7b16f12fba0d57746733aa24c2f05d19ee49b70f94aedaca0aedc0eb&",
      "https://cdn.discordapp.com/attachments/1412877723512344717/1414772380097843220/Kep3.png?ex=68f6d674&is=68f584f4&hm=f73a1b02239a56e9944db26cb697deb601ba2d49a5ab235f4b8ad21dc443bf32&",
      "https://cdn.discordapp.com/attachments/1412877723512344717/1414772407062888618/NudeKep.jpg?ex=68f6d67b&is=68f584fb&hm=647257cc9e1b3ca9a969b9f7e812286647015d98969e9ec0666bb7518ef0afad&",
      "https://cdn.discordapp.com/attachments/1412877723512344717/1414772414193209344/28.png?ex=68f6d67c&is=68f584fc&hm=2a5f3a9a3b781b5aac1c1273378283e13369cd2b30df237023555bc12a7511e4&",
      "https://cdn.discordapp.com/attachments/1412877723512344717/1414772492735746199/30.1.png?ex=68f6d68f&is=68f5850f&hm=33864cffa4cd3ff0bf65800bb7d1f0a5184d854ecb4c098aff5ed3ddc3a57d0b&",
      "https://cdn.discordapp.com/attachments/1412877723512344717/1414772607839899668/IMG_3791.png?ex=68f6d6aa&is=68f5852a&hm=8068bc89e90784c547ce33afa4229ab74828851c5e4029845cd5a4386459ba37&",
      "https://cdn.discordapp.com/attachments/1412877723512344717/1414772665599660039/40_1.png?ex=68f6d6b8&is=68f58538&hm=21504a45872f84a078d6a906a3c16009e47f1867652de410accf921f416e5c70&",
      "https://cdn.discordapp.com/attachments/1412877723512344717/1414772675435303083/Ilustracion5.png?ex=68f6d6bb&is=68f5853b&hm=be9744488ceea108b50e376475d88a8292242c769fd864739c884628a3010b0e&",
      "https://cdn.discordapp.com/attachments/1412877723512344717/1414772695404384256/gif.png?ex=68f6d6bf&is=68f5853f&hm=be2d8b2f3f681dbac48004f7e77f30252fcef48ed8728de4973ace277ac751ea&",
      "https://cdn.discordapp.com/attachments/1412877723512344717/1414772767492014181/35b.png?ex=68f6d6d0&is=68f58550&hm=d62415e4623f7e67c7fca331491144a1fe5b71fb1f9b31d02f0caa19a45cc495&"
    ];

    const info = document.getElementById('info');
    const stage = document.getElementById('stage');
    const slideA = document.getElementById('slideA');
    const slideB = document.getElementById('slideB');
    const homeBtn = document.getElementById('homeBtn');

    let index = 0;
    let front = slideA;
    let back = slideB;

    function updateInfo(){ info.textContent = `${IMAGES.length ? index + 1 : 0} / ${IMAGES.length}`; }

    function toggleHomeButton(){
      if (index === 0) homeBtn.classList.add('hidden');
      else homeBtn.classList.remove('hidden');
    }

    function isVideo(url){ return /\.(webm)(?:$|\?)/i.test(url); }

    function getNaturalSize(el){
      if (!el) return {w:0,h:0};
      if (el.tagName === 'IMG') return { w: el.naturalWidth || 0, h: el.naturalHeight || 0 };
      if (el.tagName === 'VIDEO') return { w: el.videoWidth || 0, h: el.videoHeight || 0 };
      return {w:0,h:0};
    }

    function sizeToViewport(mediaEl){
      const vw = window.innerWidth; const vh = window.innerHeight;
      const {w: nw, h: nh} = getNaturalSize(mediaEl);
      if (!nw || !nh) return;
      const scaleToFit = Math.min(vw / nw, vh / nh);
      const bothSmaller = (nw < vw && nh < vh);
      const scale = bothSmaller ? scaleToFit : Math.min(1, scaleToFit);
      const dispW = Math.round(nw * scale);
      const dispH = Math.round(nh * scale);
      mediaEl.style.width  = dispW + 'px';
      mediaEl.style.height = dispH + 'px';
    }

    function clearSlide(slide){
      const m = slide.querySelector('.media');
      if (m && m.tagName === 'VIDEO') { try { m.pause(); m.src = ''; m.load(); } catch(e){} }
      slide.innerHTML = '';
      slide.classList.remove('is-visible');
    }

    function createMedia(url){
      if (isVideo(url)){
        const v = document.createElement('video');
        v.className = 'media';
        v.playsInline = true; v.muted = true; v.loop = true; v.autoplay = true; v.preload = 'auto';
        v.src = url;
        return v;
      } else {
        const im = document.createElement('img');
        im.className = 'media';
        im.alt = '';
        im.src = url;
        return im;
      }
    }

    function preload(url){ if (isVideo(url)) { const v = document.createElement('video'); v.preload = 'metadata'; v.src = url; } else { const im = new Image(); im.src = url; } }

    function onMediaReady(mediaEl, cb){
      if (mediaEl.tagName === 'IMG'){
        if (mediaEl.complete && mediaEl.naturalWidth) { cb(); }
        else mediaEl.onload = cb;
      } else if (mediaEl.tagName === 'VIDEO'){
        if (mediaEl.readyState >= 1 && mediaEl.videoWidth) { cb(); }
        else mediaEl.onloadedmetadata = cb;
      }
    }

    function showImage(i){
      if (!IMAGES.length) return;
      index = (i + IMAGES.length) % IMAGES.length;
      const nextSrc = IMAGES[index];

      clearSlide(back);
      const media = createMedia(nextSrc);
      back.appendChild(media);

      onMediaReady(media, () => {
        sizeToViewport(media);
        back.classList.add('is-visible');
        front.classList.remove('is-visible');
        const prev = front.querySelector('.media');
        if (prev && prev.tagName === 'VIDEO') { try { prev.pause(); } catch(e){} }
        [front, back] = [back, front];
        updateInfo();
        toggleHomeButton();
        preload(IMAGES[(index + 1) % IMAGES.length]);
      });
    }

    function shuffleTail(arr){
      if (arr.length <= 2) return;
      for (let j = arr.length - 1; j > 1; j--) {
        const k = 1 + Math.floor(Math.random() * j);
        [arr[j], arr[k]] = [arr[k], arr[j]];
      }
    }

    homeBtn.addEventListener('click', (e)=>{
      e.stopPropagation();
      shuffleTail(IMAGES);
      showImage(0);
    });

    stage.addEventListener('click', () => showImage(index + 1));
    window.addEventListener('keydown', (e) => {
      if (!IMAGES.length) return;
      if (e.key === 'ArrowRight' || e.key === ' ') { e.preventDefault(); showImage(index + 1); }
      else if (e.key === 'ArrowLeft') { e.preventDefault(); showImage(index - 1); }
    });

    window.addEventListener('resize', () => {
      const mA = front.querySelector('.media');
      const mB = back.querySelector('.media');
      if (mA) sizeToViewport(mA);
      if (mB) sizeToViewport(mB);
    });

    (function init(){
      if (!IMAGES.length) return;
      shuffleTail(IMAGES); // randomize all but first at start
      updateInfo();
      const first = IMAGES[0];
      const media = createMedia(first);
      front.appendChild(media);
      onMediaReady(media, () => { sizeToViewport(media); front.classList.add('is-visible'); updateInfo(); toggleHomeButton(); preload(IMAGES[1 % IMAGES.length]); });
    })();
  </script>
</body>
</html>
